<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ detai_dt.1.2 }}</title>
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }

        #l-map {
            height: 100%;
            width: 100%;
        }

    </style>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=n3dEB2E9nKLfDb4avibAMBd9fC2iTkt9"></script>
</head>
<body>
<div id="page-wrapper" style="min-height: 405px;">

    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">{{ detai_dt.1.2 }}</h2>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <i class="fa fa-info-circle fa-fw"></i> 基本信息
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-4 col-lg-4 " align="center">
                    <!--TODO-->
                    {% load static %}
                    <img src="{% static 'singleDog.jpg' %}">
                    <!--END-->
                </div>
                <div class=" col-md-8 col-lg-8 ">
                    <table class="table">
                        <tbody>
                        <tr>
                            <td style="width: 15%">小区名:</td>
                            <td>{{ detai_dt.1.2 }}</td>
                            <td style="width: 15%">面积:</td>
                            <td>{{ detai_dt.1.7 }}</td>
                        </tr>
                        <tr>
                            <td>房型:</td>
                            <td>{{ detai_dt.1.3 }}</td>
                            <td>楼层:</td>
                            <td>{{ detai_dt.1.12 }}</td>
                        </tr>
                        <tr>
                            <td>建造时间:</td>
                            <td>{{ detai_dt.1.8 }}</td>
                            <td>首付:</td>
                            <td>{{ detai_dt.1.7 }}</td>
                        </tr>
                        <tr>
                            <td>每平米:</td>
                            <td colspan="3">{{ detai_dt.1.4 }}</td>
                        </tr>
                        <tr>
                            <td>地址:</td>
                            <td colspan="3">{{ detai_dt.1.5 }}</td>
                        </tr>
                        <tr>
                            <td>数据来源:</td>
                            <td>
                                <a href="{{ detai_dt.1.19 }}">安居客二手房交易市场</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">周边基础设施</h2>
        </div>
    </div>


</div>
<div id="l-map"></div>
{% load static %}
{#<script src="../static/jquery-3.4.0.min.js"></script>#}
<script src="{% static 'jquery-3.4.0.min.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function () {
        // 百度地图API功能

        let Ap = '{{ detai_dt.1.5 }}' + '－'+'{{ detai_dt.1.2 }}';
        var myGeo = new BMap.Geocoder();
        myGeo.getPoint(Ap, function (Point) {

            var map = new BMap.Map("l-map");            // 创建Map实例
            //var mPoint = new BMap.Point(Point); // 经纬度
            var marker = new BMap.Marker(Point);
            map.enableScrollWheelZoom();                    //地图可放大缩小的
            map.centerAndZoom(Point, 15);                  // 设置中心点
            map.addOverlay(marker);                         //加载覆盖物
            marker.setAnimation(BMAP_ANIMATION_BOUNCE);     // 出现跳点
            var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
            var local = new BMap.LocalSearch(map,
                {
                    renderOptions: {map: map, panel: "r-result"},
                    pageCapacity: 5,
                });

            var myKeys = ['公交车站', '酒店', '广场', '医院', '学校', '景点']; // 先声明需要获取的周边基设信息的名称

            // 画出一个搜索范围圈
            var circle = new BMap.Circle(Point, 500, {
                fillColor: "yellow",
                strokeWeight: 1,
                fillOpacity: 0.3,
                strokeOpacity: 0.3
            });
            map.addOverlay(circle);
            local.searchNearby(myKeys, Point, 500);

        }, '江门市');
    });
</script>

</body>
</html>